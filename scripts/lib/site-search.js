// Generated by CoffeeScript 1.4.0
(function(){var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}},r=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};t=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;w={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"};E={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""};i="[^aeiou]";x="[aeiouy]";n=i+"[^aeiouy]*";r=x+"[aeiou]*";l="^("+n+")?"+r+n;f="^("+n+")?"+r+n+"("+r+")?$";c="^("+n+")?"+r+n+r+n;y="^("+n+")?"+x;o=function(){return null};g=function(){return console.log(Array.prototype.slice.call(arguments).join(" "))};s=t?g:o;h=e;if(e.length<3)return e;u=e.substr(0,1);u==="y"&&(e=u.toUpperCase()+e.substr(1));p=/^(.+?)(ss|i)es$/;d=/^(.+?)([^s])s$/;if(p.test(e)){e=e.replace(p,"$1$2");s("1a",p,e)}else if(d.test(e)){e=e.replace(d,"$1$2");s("1a",d,e)}p=/^(.+?)eed$/;d=/^(.+?)(ed|ing)$/;if(p.test(e)){a=p.exec(e);p=new RegExp(l);e=e.replace(p,"");s("1b",p,e)}else if(d.test(e)){a=d.exec(e);b=a[1];d=new RegExp(y);if(d.test(b)){e=b;s("1b",d,e);d=/(at|bl|iz)$/;v=new RegExp("([^aeiouylsz])\\1$");m=new RegExp("^"+n+r+x+"[^aeiouwxy]$");if(d.test(e)){e+="e";s("1b",d,e)}else if(v.test(e)){p=/.$/;e=e.replace(p,"");s("1b",v,e)}else if(m.test(e)){e+="e";s("1b",m,e)}}}p=new RegExp("^(.*"+x+".*)y$");if(p.test(e)){a=p.exec(e);b=a[1];e=b+"i";s("1c",p,e)}p=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;if(p.test(e)){a=p.exec(e);b=a[1];S=a[2];p=new RegExp(l);if(p.test(b)){e=b+w[S];s("2",p,e)}}p=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;if(p.test(e)){a=p.exec(e);b=a[1];S=a[2];p=new RegExp(l);if(p.test(b)){e=b+E[S];s("3",p,e)}}p=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;d=/^(.+?)(s|t)(ion)$/;if(p.test(e)){a=p.exec(e);b=a[1];p=new RegExp(c);if(p.test(b)){e=b;s("4",p,e)}else if(d.test(e)){a=d.exec(e);b=a[1]+a[2];d=new RegExp(c);if(d.test(b)){e=b;s("4",d,e)}}}p=/^(.+?)e$/;if(p.test(e)){a=p.exec(e);b=a[1];p=new RegExp(c);d=new RegExp(f);v=new RegExp("^"+n+x+"[^aeiouwxy]$");if(p.test(b||d.test(b&&!v.test(b)))){e=b;s("5",p,d,v,e)}}p=/ll$/;d=new RegExp(c);if(p.test(e&&d.test(e))){p=/.$/;e=e.replace(p,"");s("5",p,d,e)}u==="y"&&(e=u.toLowerCase()+e.substr(1));return e};window.searchTimeout=null;$(document).ready(function(){var e;e=(new RegExp("[\\?&]query=([^&#]*)")).exec(window.location.href);e!==null&&performSearch(decodeURIComponent(e[1].replace(/[+]/gi," ")));return $("#search-query").on("keyup",function(e){return performSearch($(this).val())})});window.performSearch=function(t){var n;$("#search-results").empty();if(t.isEmpty()===!0){$("#search-results").append("Enter something to search for");return}n=new e(t);return n.search()};String.prototype.isEmpty=function(){return this.replace(/\s/g,"")===""?!0:!1};e=function(){function e(e){this.searchTerm=e;this.search=n(this.search,this);this.renderResult=n(this.renderResult,this);this.getPosts=n(this.getPosts,this);this.getPostIDs=n(this.getPostIDs,this);this.loadIndexes=n(this.loadIndexes,this);this.getIndexURLs=n(this.getIndexURLs,this);this.parseWords=n(this.parseWords,this);this.stemmedWords=this.parseWords(e)}e.prototype.parseWords=function(e){var n,i,s,o,u;s=e.toLowerCase().match(/\w{2,}/gi);n=[];for(o=0,u=s.length;o<u;o++){i=s[o];r.call(n,i)<0&&n.push(t(i))}return n};e.prototype.getIndexURLs=function(){var e,t,n,r,i,s;e={};s=this.stemmedWords;for(r=0,i=s.length;r<i;r++){n=s[r];t="/search/terms/"+n.slice(0,2).toLowerCase()+".json";e[t]=null}return e};e.prototype.loadIndexes=function(e){var t,n,r,i=this;n=[];r=[];for(t in e)n.push($.getJSON(t,function(e){return r.push(e)}));return $.when.apply($,n).then(function(){return i.getPostIDs(r)})};e.prototype.getPostIDs=function(e){var t,n,r,i,s,o,u,a,f,l,c;r={};for(u=0,f=e.length;u<f;u++){n=e[u];for(o in n)if($.inArray(o,this.stemmedWords)!==-1){c=n[o];for(a=0,l=c.length;a<l;a++){t=c[a];typeof r[t]=="undefined"?r[t]=1:r[t]++}}}s=[];for(i in r)s.push([i,r[i]]);this.posts=s.sort(function(e,t){return t[1]-e[1]});return this.getPosts()};e.prototype.getPosts=function(){var e,t,n,r,i;if(this.posts.length>0){r=this.posts;i=[];for(t=0,n=r.length;t<n;t++){e=r[t];i.push($.get("/search/posts/"+e[0]+".html",this.renderResult))}return i}return this.renderResult("<p>No results found</p>")};e.prototype.renderResult=function(e){return $("#search-results").append(e)};e.prototype.search=function(){return this.loadIndexes(this.getIndexURLs())};return e}()}).call(this);